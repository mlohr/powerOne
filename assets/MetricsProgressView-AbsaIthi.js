import{r as w,j as e,d as i}from"./index-TsTE-49y.js";function U({currentUser:x,activeSprint:o,organizationalUnits:h,objectives:g,keyResults:u,onUpdateMetric:b}){const[c,m]=w.useState({}),p=t=>{const{baseline:s,currentValue:r,target:a,direction:l}=t;if(l==="increase"){const n=a-s,d=r-s;return n>0?Math.round(d/n*100):0}else{const n=s-a,d=s-r;return n>0?Math.round(d/n*100):0}},v=t=>t>=75?"text-teal-600 dark:text-teal-400":t>=50?"text-blue-600 dark:text-blue-400":t>=25?"text-amber-600 dark:text-amber-400":"text-slate-500 dark:text-slate-400",j=t=>g.find(s=>s.id===t),f=t=>h.find(s=>s.id===t),k=(t,s)=>{m(r=>({...r,[t]:s}))},N=t=>{const s=c[t];if(s&&s.trim()!==""){const r=parseFloat(s);isNaN(r)||(b?.(t,r),m(a=>{const l={...a};return delete l[t],l}))}};return e.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 px-4 py-8 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-baseline gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-50",children:"Metrics & Progress"}),e.jsxs("span",{className:"text-sm font-medium px-2.5 py-0.5 rounded-full bg-teal-100 text-teal-700 dark:bg-teal-900/30 dark:text-teal-300",children:["Sprint ",o.name]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Update metric values for your Key Results"})]}),e.jsxs("div",{className:"space-y-6",children:[u.map(t=>{const s=j(t.objectiveId),r=s?f(s.organizationalUnitId):null;return e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg p-6 transition-shadow hover:shadow-md",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50 leading-tight",children:t.title}),r&&e.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400 whitespace-nowrap",children:r.level})]}),s&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:s.title})]}),e.jsx("div",{className:"space-y-4",children:t.metrics.map(a=>{const l=p(a),n=c[a.id]!==void 0,d=c[a.id]??a.currentValue.toString();return e.jsxs("div",{className:"border border-slate-200 dark:border-slate-800 rounded-lg p-4 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:a.name}),e.jsxs("span",{className:`text-sm font-bold ${v(l)}`,children:[l,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 mb-1",children:"Baseline"}),e.jsxs("div",{className:"font-medium text-slate-700 dark:text-slate-300",children:[a.baseline," ",a.unit]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 mb-1",children:"Current"}),e.jsxs("div",{className:"font-bold text-slate-900 dark:text-slate-50",children:[a.currentValue," ",a.unit]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 mb-1",children:"Target"}),e.jsxs("div",{className:"font-medium text-slate-700 dark:text-slate-300",children:[a.target," ",a.unit]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",value:d,onChange:y=>k(a.id,y.target.value),placeholder:"Enter new value",className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-700 rounded-md bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-50 placeholder-slate-400 dark:placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-teal-500 dark:focus:ring-teal-400 focus:border-transparent transition-all"})}),e.jsx("button",{onClick:()=>N(a.id),disabled:!n||d.trim()==="",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 dark:bg-teal-500 dark:hover:bg-teal-600 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 dark:focus:ring-teal-400",children:"Save"})]})]},a.id)})})]},t.id)}),u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-slate-400 dark:text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-50 mb-2",children:"No Key Results to update"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"You don't have any Key Results assigned in the active sprint."})]})]})]})})}function V(){return e.jsx(U,{currentUser:i.currentUser,activeSprint:i.activeSprint,organizationalUnits:i.organizationalUnits,objectives:i.objectives,keyResults:i.keyResults,onUpdateMetric:(x,o)=>{console.log("Update metric:",x,"to",o)}})}export{V as default};
