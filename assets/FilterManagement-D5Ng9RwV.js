import{c as C,r as x,j as e,X as z,a as O}from"./index-BDsReaFO.js";import{F as L}from"./funnel-ByO39w9d.js";import{T as A}from"./trash-2-D8_Y77A3.js";const D=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],E=C("eye",D),P=["Group","Entity","Domain","Department","Team"],M=["Draft","Accepted","Active","Done","Archived","Cancelled"];function T({filter:r,objectives:o,sprints:u,users:m,isOpen:p,onClose:b,onSubmit:l,onDelete:h}){const[a,i]=x.useState({name:"",criteria:{},isShared:!1}),[n,g]=x.useState([]),[d,f]=x.useState([]),[k,N]=x.useState(!1);x.useEffect(()=>{if(r&&!r.isPreset){const t=Array.isArray(r.criteria.organizationalLevel)?r.criteria.organizationalLevel:r.criteria.organizationalLevel?[r.criteria.organizationalLevel]:[],s=Array.isArray(r.criteria.status)?r.criteria.status:r.criteria.status?[r.criteria.status]:[];i({name:r.name,criteria:r.criteria,isShared:r.isShared}),g(t),f(s)}else i({name:"",criteria:{},isShared:!1}),g([]),f([])},[r]);const w=t=>{t.preventDefault();const s={};n.length>0&&(s.organizationalLevel=n),d.length>0&&(s.status=d),a.criteria.sprint&&(s.sprint=a.criteria.sprint),a.criteria.owner&&(s.owner=a.criteria.owner),l({name:a.name,criteria:s,isShared:a.isShared})},y=t=>{g(s=>s.includes(t)?s.filter(j=>j!==t):[...s,t])},S=t=>{f(s=>s.includes(t)?s.filter(j=>j!==t):[...s,t])},F=o.filter(t=>!(n.length>0&&t.organizationalLevel&&!n.includes(t.organizationalLevel)||d.length>0&&!d.includes(t.status)||a.criteria.sprint&&t.sprint!==a.criteria.sprint||a.criteria.owner&&t.owner.id!==a.criteria.owner));if(!p)return null;const v=!!r&&!r.isPreset;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 dark:bg-slate-950/80 z-40 backdrop-blur-sm",onClick:b}),e.jsx("div",{className:"fixed inset-y-0 right-0 w-full max-w-2xl bg-white dark:bg-slate-900 shadow-2xl z-50 overflow-y-auto",children:e.jsxs("form",{onSubmit:w,className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-shrink-0 px-6 py-5 border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-teal-100 dark:bg-teal-950 flex items-center justify-center",children:e.jsx(L,{className:"text-teal-600 dark:text-teal-400",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:v?"Edit Custom Filter":"Create Custom Filter"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Save your filter criteria for quick access"})]})]}),e.jsx("button",{type:"button",onClick:b,className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",children:e.jsx(z,{size:20})})]})}),e.jsxs("div",{className:"flex-1 px-6 py-6 space-y-6 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filter Name *"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:t=>i({...a,name:t.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500 dark:focus:ring-teal-600 focus:border-transparent",placeholder:"e.g., Q1 Active Objectives, My Team Goals"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Organizational Levels (Optional)"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mb-3",children:"Select one or more levels to filter by"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(t=>e.jsx("button",{type:"button",onClick:()=>y(t),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${n.includes(t)?"bg-teal-100 dark:bg-teal-950 text-teal-700 dark:text-teal-300 border-2 border-teal-500 dark:border-teal-600":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-2 border-transparent hover:border-slate-300 dark:hover:border-slate-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Status (Optional)"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mb-3",children:"Select one or more statuses to filter by"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(t=>e.jsx("button",{type:"button",onClick:()=>S(t),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d.includes(t)?"bg-teal-100 dark:bg-teal-950 text-teal-700 dark:text-teal-300 border-2 border-teal-500 dark:border-teal-600":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-2 border-transparent hover:border-slate-300 dark:hover:border-slate-600"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Sprint (Optional)"}),e.jsxs("select",{value:a.criteria.sprint||"",onChange:t=>i({...a,criteria:{...a.criteria,sprint:t.target.value||void 0}}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-teal-500 dark:focus:ring-teal-600 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Sprints"}),u.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.status,")"]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Owner (Optional)"}),e.jsxs("select",{value:a.criteria.owner||"",onChange:t=>i({...a,criteria:{...a.criteria,owner:t.target.value||void 0}}),className:"w-full px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-teal-500 dark:focus:ring-teal-600 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Owners"}),m.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-lg border border-slate-200 dark:border-slate-700 hover:border-teal-300 dark:hover:border-teal-700 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:a.isShared,onChange:t=>i({...a,isShared:t.target.checked}),className:"mt-0.5 w-4 h-4 text-teal-600 dark:text-teal-500 rounded border-slate-300 dark:border-slate-600 focus:ring-teal-500 dark:focus:ring-teal-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:"Share this filter with others"}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"When shared, this filter will be visible to all users in the secondary navigation"})]})]})}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-800 pt-6",children:[e.jsxs("button",{type:"button",onClick:()=>N(!k),className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300 hover:text-teal-600 dark:hover:text-teal-400 transition-colors mb-4",children:[e.jsx(E,{size:16}),k?"Hide Preview":"Show Preview"]}),k&&e.jsxs("div",{className:"p-4 bg-teal-50 dark:bg-teal-950/50 rounded-lg border border-teal-200 dark:border-teal-800",children:[e.jsx("p",{className:"text-sm font-medium text-teal-900 dark:text-teal-100 mb-3",children:"Filter Preview"}),n.length===0&&d.length===0&&!a.criteria.sprint&&!a.criteria.owner?e.jsx("p",{className:"text-sm text-teal-700 dark:text-teal-300",children:"No criteria selected. This filter will show all objectives."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 mb-3",children:[n.length>0&&e.jsxs("p",{className:"text-xs text-teal-800 dark:text-teal-200",children:[e.jsx("span",{className:"font-medium",children:"Levels:"})," ",n.join(", ")]}),d.length>0&&e.jsxs("p",{className:"text-xs text-teal-800 dark:text-teal-200",children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",d.join(", ")]}),a.criteria.sprint&&e.jsxs("p",{className:"text-xs text-teal-800 dark:text-teal-200",children:[e.jsx("span",{className:"font-medium",children:"Sprint:"})," ",u.find(t=>t.id===a.criteria.sprint)?.name]}),a.criteria.owner&&e.jsxs("p",{className:"text-xs text-teal-800 dark:text-teal-200",children:[e.jsx("span",{className:"font-medium",children:"Owner:"})," ",m.find(t=>t.id===a.criteria.owner)?.name]})]}),e.jsx("div",{className:"pt-3 border-t border-teal-200 dark:border-teal-800",children:e.jsxs("p",{className:"text-sm font-medium text-teal-900 dark:text-teal-100",children:[F.length," objective(s) match this filter"]})})]})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/50 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100 mb-2",children:"ðŸ’¡ About Custom Filters"}),e.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[e.jsx("li",{children:'â€¢ Custom filters appear in the sidebar under "OKR Hierarchy"'}),e.jsx("li",{children:"â€¢ Combine multiple criteria to create powerful filtered views"}),e.jsx("li",{children:"â€¢ Shared filters are visible to all users"}),e.jsx("li",{children:"â€¢ Pre-set filters (My OKRs, My Entity, My Domain) cannot be edited"})]})]})]}),e.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"flex items-center justify-between",children:[v&&h?e.jsxs("button",{type:"button",onClick:h,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950 transition-colors font-medium",children:[e.jsx(A,{size:16}),"Delete Filter"]}):e.jsx("div",{}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 rounded-lg bg-teal-600 dark:bg-teal-700 text-white hover:bg-teal-700 dark:hover:bg-teal-600 transition-colors font-medium shadow-sm",children:v?"Save Changes":"Create Filter"})]})]})})]})})]})}const c=O;function G(){const[r,o]=x.useState(!0),[u,m]=x.useState(!1),p=[c.currentUser,...c.objectives.map(l=>l.owner).filter((l,h,a)=>a.findIndex(i=>i.id===l.id)===h)],b=c.savedFilters.find(l=>!l.isPreset)||null;return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-8",children:[e.jsx("div",{className:"max-w-4xl mx-auto space-y-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-6 border border-slate-200 dark:border-slate-800",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-4",children:"Filter Management Preview"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"This preview shows the custom filter creation and editing form. Users can create saved filters with multiple criteria and share them with others."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{m(!1),o(!0)},className:"px-4 py-2 rounded-lg bg-teal-600 text-white hover:bg-teal-700 transition-colors font-medium",children:"Create New Filter"}),e.jsx("button",{onClick:()=>{m(!0),o(!0)},className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors font-medium",children:"Edit Existing Filter"})]})]})}),e.jsx(T,{filter:u?b:null,organizationalUnits:c.organizationalUnits,objectives:c.objectives,sprints:c.sprints,programs:c.programs,users:p,isOpen:r,onClose:()=>o(!1),onSubmit:l=>{console.log("Filter form submitted:",l),o(!1)},onDelete:()=>{console.log("Delete filter"),o(!1)}})]})}export{G as default};
