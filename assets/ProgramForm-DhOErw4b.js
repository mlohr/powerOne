import{c as k,r as h,j as e,X as j,g as v}from"./index-BDsReaFO.js";import{U as N}from"./users-Cp7o4VAZ.js";import{T as y}from"./target-CQ0IBjpL.js";import{S as w}from"./save-BBG9Nof6.js";const I=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],S=k("building-2",I);function C({program:r,onSubmit:i,onCancel:m,availableLeads:n=[],availableObjectives:c=[],availableEntities:u=[]}){const x=!!r,[a,l]=h.useState({name:r?.name||"",description:r?.description||"",leadIds:r?.leads.map(t=>t.userId)||[],objectiveIds:r?.linkedObjectives.map(t=>t.id)||[],entityIds:r?.entitiesInvolved||[]});h.useEffect(()=>{r&&l({name:r.name,description:r.description,leadIds:r.leads.map(t=>t.userId),objectiveIds:r.linkedObjectives.map(t=>t.id),entityIds:r.entitiesInvolved})},[r]);const o=t=>{t.preventDefault();const s={name:a.name,description:a.description,leads:n.filter(d=>a.leadIds.includes(d.userId)),linkedObjectives:c.filter(d=>a.objectiveIds.includes(d.id)),entitiesInvolved:a.entityIds};i?.(s)},p=t=>{l(s=>({...s,leadIds:s.leadIds.includes(t)?s.leadIds.filter(d=>d!==t):[...s.leadIds,t]}))},g=t=>{l(s=>({...s,objectiveIds:s.objectiveIds.includes(t)?s.objectiveIds.filter(d=>d!==t):[...s.objectiveIds,t]}))},f=t=>{l(s=>({...s,entityIds:s.entityIds.includes(t)?s.entityIds.filter(d=>d!==t):[...s.entityIds,t]}))};return e.jsx("div",{className:"fixed inset-0 bg-slate-900/50 dark:bg-slate-950/80 backdrop-blur-sm z-50 flex items-center justify-end animate-fade-in",children:e.jsxs("div",{className:"w-full max-w-2xl h-full bg-white dark:bg-slate-900 shadow-2xl flex flex-col animate-slide-in-right",children:[e.jsx("div",{className:"shrink-0 bg-gradient-to-r from-teal-500 to-blue-600 dark:from-teal-600 dark:to-blue-700 px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:x?"Edit Program":"New Program"}),e.jsx("p",{className:"text-sm text-teal-50 dark:text-teal-100",children:x?"Update program details and assignments":"Create a cross-entity strategic initiative"})]}),e.jsx("button",{onClick:m,className:"w-10 h-10 rounded-lg bg-white/10 hover:bg-white/20 backdrop-blur-sm flex items-center justify-center text-white transition-all",children:e.jsx(j,{className:"w-5 h-5",strokeWidth:2})})]})}),e.jsx("form",{onSubmit:o,className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"program-name",className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Program Name *"}),e.jsx("input",{id:"program-name",type:"text",required:!0,value:a.name,onChange:t=>l(s=>({...s,name:t.target.value})),placeholder:"e.g., Global Revenue Acceleration",className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"program-description",className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Description *"}),e.jsx("textarea",{id:"program-description",required:!0,rows:4,value:a.description,onChange:t=>l(s=>({...s,description:t.target.value})),placeholder:"Describe the strategic initiative and its goals...",className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all resize-none"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(N,{className:"w-5 h-5 text-teal-600 dark:text-teal-400",strokeWidth:2}),e.jsxs("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Program Leads * ",e.jsx("span",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:"(Select one or more)"})]})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto p-1",children:n.map(t=>e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800 hover:bg-teal-50 dark:hover:bg-teal-950/30 border border-slate-200 dark:border-slate-700 hover:border-teal-300 dark:hover:border-teal-700 rounded-lg cursor-pointer transition-all group",children:[e.jsx("input",{type:"checkbox",checked:a.leadIds.includes(t.userId),onChange:()=>p(t.userId),className:"w-5 h-5 rounded border-slate-300 dark:border-slate-600 text-teal-600 focus:ring-2 focus:ring-teal-500 focus:ring-offset-0"}),e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-400 to-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-white",children:t.initials})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100 group-hover:text-teal-700 dark:group-hover:text-teal-300 transition-colors",children:t.name}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate",children:t.email})]})]})]},t.userId))}),a.leadIds.length===0&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"Please select at least one program lead"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(y,{className:"w-5 h-5 text-blue-600 dark:text-blue-400",strokeWidth:2}),e.jsxs("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Linked Objectives ",e.jsx("span",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:"(Optional)"})]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto p-1",children:c.length===0?e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 p-4 text-center bg-slate-50 dark:bg-slate-800 rounded-lg",children:"No objectives available"}):c.map(t=>e.jsxs("label",{className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-slate-800 hover:bg-blue-50 dark:hover:bg-blue-950/30 border border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700 rounded-lg cursor-pointer transition-all group",children:[e.jsx("input",{type:"checkbox",checked:a.objectiveIds.includes(t.id),onChange:()=>g(t.id),className:"mt-0.5 w-5 h-5 rounded border-slate-300 dark:border-slate-600 text-blue-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100 group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors mb-1",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"px-2 py-0.5 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded text-xs font-medium",children:t.organizationalUnit}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.owner}),e.jsxs("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:[t.progress,"%"]})]})]})]},t.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(S,{className:"w-5 h-5 text-teal-600 dark:text-teal-400",strokeWidth:2}),e.jsxs("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Cross-Entity Scope * ",e.jsx("span",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:"(Select entities involved)"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(t=>e.jsx("button",{type:"button",onClick:()=>f(t),className:`px-4 py-2 rounded-lg font-medium transition-all ${a.entityIds.includes(t)?"bg-teal-600 dark:bg-teal-500 text-white border-2 border-teal-600 dark:border-teal-500":"bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-300 border-2 border-slate-200 dark:border-slate-700 hover:border-teal-400 dark:hover:border-teal-500"}`,children:t},t))}),a.entityIds.length===0&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"Please select at least one entity"})]})]})}),e.jsx("div",{className:"shrink-0 bg-slate-50 dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:m,className:"px-5 py-2.5 text-sm font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",onClick:o,disabled:!a.name||!a.description||a.leadIds.length===0||a.entityIds.length===0,className:"flex items-center gap-2 px-5 py-2.5 text-sm font-semibold bg-gradient-to-r from-teal-600 to-blue-600 dark:from-teal-500 dark:to-blue-500 text-white rounded-lg hover:from-teal-700 hover:to-blue-700 dark:hover:from-teal-600 dark:hover:to-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:[e.jsx(w,{className:"w-4 h-4",strokeWidth:2}),x?"Save Changes":"Create Program"]})]})})]})})}const b=v;function D(){const[r,i]=h.useState(!0),[m,n]=h.useState("create"),c=m==="edit"?b.programs[0]:void 0,u=Array.from(new Set(b.programs.flatMap(l=>l.leads.map(o=>JSON.stringify(o))))).map(l=>JSON.parse(l)),x=Array.from(new Set(b.programs.flatMap(l=>l.linkedObjectives.map(o=>JSON.stringify(o))))).map(l=>JSON.parse(l)),a=Array.from(new Set(b.programs.flatMap(l=>l.entitiesInvolved))).sort();return r?e.jsx(C,{program:c,onSubmit:l=>{console.log("Submit program:",l),i(!1)},onCancel:()=>{console.log("Cancel form"),i(!1)},availableLeads:u,availableObjectives:x,availableEntities:a}):e.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",children:"Program Form Preview"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Click a button below to preview the form"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>{n("create"),i(!0)},className:"px-5 py-3 bg-teal-600 dark:bg-teal-500 text-white font-semibold rounded-xl hover:bg-teal-700 dark:hover:bg-teal-600 transition-colors",children:"Create Mode"}),e.jsx("button",{onClick:()=>{n("edit"),i(!0)},className:"px-5 py-3 bg-blue-600 dark:bg-blue-500 text-white font-semibold rounded-xl hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors",children:"Edit Mode"})]})]})})}export{D as default};
