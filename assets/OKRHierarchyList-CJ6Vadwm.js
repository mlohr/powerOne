import{c as Z,r as g,j as e,X as P,C as _,b as R,A as ee,a as ne}from"./index-BDsReaFO.js";import{F as te}from"./funnel-ByO39w9d.js";import{S as oe}from"./sparkles-2Ptumlve.js";import{S as se}from"./save-BBG9Nof6.js";import{S as ie}from"./search-CxWY4ejQ.js";import{T as ae}from"./TaskItem-DRoZSrgN.js";import{P as xe}from"./plus-CUXgmiyE.js";import{T as q}from"./target-CQ0IBjpL.js";import{T as le}from"./trending-up-DtKHn4Nw.js";const ce=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],me=Z("layout-grid",ce);const ue=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],he=Z("list",ue);const ge=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],pe=Z("network",ge),be=["Draft","Accepted","Active","Done","Archived","Cancelled"],ke={Group:"bg-purple-100 dark:bg-purple-950 text-purple-700 dark:text-purple-300 border-purple-300 dark:border-purple-700",Entity:"bg-teal-100 dark:bg-teal-950 text-teal-700 dark:text-teal-300 border-teal-300 dark:border-teal-700",Domain:"bg-blue-100 dark:bg-blue-950 text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-700",Department:"bg-amber-100 dark:bg-amber-950 text-amber-700 dark:text-amber-300 border-amber-300 dark:border-amber-700",Team:"bg-rose-100 dark:bg-rose-950 text-rose-700 dark:text-rose-300 border-rose-300 dark:border-rose-700"},fe={Draft:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-700",Accepted:"bg-blue-100 dark:bg-blue-950 text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-700",Active:"bg-teal-100 dark:bg-teal-950 text-teal-700 dark:text-teal-300 border-teal-300 dark:border-teal-700",Done:"bg-emerald-100 dark:bg-emerald-950 text-emerald-700 dark:text-emerald-300 border-emerald-300 dark:border-emerald-700",Archived:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400 border-slate-300 dark:border-slate-700",Cancelled:"bg-red-100 dark:bg-red-950 text-red-700 dark:text-red-300 border-red-300 dark:border-red-700"};function X({label:r,options:j,selectedValues:p,onToggle:y,getLabel:h,groupBy:l,getGroupLabel:d}){const[f,T]=g.useState(!1),[I,C]=g.useState(""),k=g.useRef(null),v=g.useRef(null);g.useEffect(()=>{const n=c=>{k.current&&!k.current.contains(c.target)&&(T(!1),C(""))};return f&&(document.addEventListener("mousedown",n),setTimeout(()=>v.current?.focus(),0)),()=>{document.removeEventListener("mousedown",n)}},[f]);const N=p.length,O=j.filter(n=>(h?h(n):n).toLowerCase().includes(I.toLowerCase())),u={};return l&&O.forEach(n=>{const c=l(n);u[c]||(u[c]=[]),u[c].push(n)}),e.jsxs("div",{className:"relative",ref:k,children:[e.jsxs("button",{type:"button",onClick:()=>T(!f),className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium transition-colors ${N>0?"bg-teal-50 dark:bg-teal-950/50 border-teal-300 dark:border-teal-700 text-teal-700 dark:text-teal-300":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[e.jsx("span",{children:r}),N>0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-teal-600 dark:bg-teal-700 text-white",children:N}),e.jsx(_,{size:14,className:`transition-transform ${f?"rotate-180":""}`})]}),f&&e.jsxs("div",{className:"absolute z-50 mt-2 w-72 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg",children:[e.jsx("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700",children:e.jsx("input",{ref:v,type:"text",value:I,onChange:n=>C(n.target.value),placeholder:`Search ${r.toLowerCase()}...`,className:"w-full px-3 py-2 text-sm rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500 dark:focus:ring-teal-600 focus:border-transparent"})}),e.jsx("div",{className:"max-h-64 overflow-y-auto p-2",children:O.length===0?e.jsx("div",{className:"px-3 py-6 text-center text-sm text-slate-500 dark:text-slate-400",children:"No results found"}):l?Object.keys(u).map(n=>u[n].length===0?null:e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:d?d(n):n}),u[n].map(c=>{const S=p.includes(c),$=h?h(c):c;return e.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:()=>y(c),className:"w-4 h-4 text-teal-600 dark:text-teal-500 rounded border-slate-300 dark:border-slate-600 focus:ring-teal-500 dark:focus:ring-teal-600"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:$})]},c)})]},n)):O.map(n=>{const c=p.includes(n),S=h?h(n):n;return e.jsxs("label",{className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:()=>y(n),className:"w-4 h-4 text-teal-600 dark:text-teal-500 rounded border-slate-300 dark:border-slate-600 focus:ring-teal-500 dark:focus:ring-teal-600"}),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:S})]},n)})})]})]})}function re({label:r,options:j,selectedValue:p,onChange:y,getLabel:h,placeholder:l="Select..."}){const[d,f]=g.useState(!1),[T,I]=g.useState(""),C=g.useRef(null),k=g.useRef(null);g.useEffect(()=>{const u=n=>{C.current&&!C.current.contains(n.target)&&(f(!1),I(""))};return d&&(document.addEventListener("mousedown",u),setTimeout(()=>k.current?.focus(),0)),()=>{document.removeEventListener("mousedown",u)}},[d]);const v=j.filter(u=>(h?h(u):u).toLowerCase().includes(T.toLowerCase())),N=p?h?h(p):p:l,O=!!p;return e.jsxs("div",{className:"relative",ref:C,children:[e.jsxs("button",{type:"button",onClick:()=>f(!d),className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium transition-colors ${O?"bg-teal-50 dark:bg-teal-950/50 border-teal-300 dark:border-teal-700 text-teal-700 dark:text-teal-300":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[e.jsx("span",{className:"truncate max-w-[150px]",children:N}),e.jsx(_,{size:14,className:`transition-transform flex-shrink-0 ${d?"rotate-180":""}`})]}),d&&e.jsxs("div",{className:"absolute z-50 mt-2 w-72 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg",children:[e.jsx("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",size:16}),e.jsx("input",{ref:k,type:"text",value:T,onChange:u=>I(u.target.value),placeholder:`Search ${r.toLowerCase()}...`,className:"w-full pl-9 pr-3 py-2 text-sm rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-teal-500 dark:focus:ring-teal-600 focus:border-transparent"})]})}),e.jsxs("div",{className:"max-h-64 overflow-y-auto p-2",children:[O&&e.jsxs("button",{type:"button",onClick:()=>{y(""),f(!1),I("")},className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-left",children:[e.jsx(P,{size:14,className:"text-slate-400 dark:text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 italic",children:"Clear selection"})]}),v.length===0?e.jsx("div",{className:"px-3 py-6 text-center text-sm text-slate-500 dark:text-slate-400",children:"No results found"}):v.map(u=>{const n=h?h(u):u,c=p===u;return e.jsx("button",{type:"button",onClick:()=>{y(u),f(!1),I("")},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors text-left ${c?"bg-teal-50 dark:bg-teal-950 text-teal-700 dark:text-teal-300":"hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:e.jsx("span",{className:"text-sm",children:n})},u)})]})]})]})}function je({criteria:r,activeFilter:j,organizationalUnits:p,sprints:y,programs:h,users:l,onCriteriaChange:d,onSaveAsNewFilter:f,onUpdateFilter:T,onClearFilters:I}){const[C,k]=g.useState(!1),[v,N]=g.useState(""),[O,u]=g.useState(!1),n=Array.isArray(r.organizationalUnitId)?r.organizationalUnitId:r.organizationalUnitId?[r.organizationalUnitId]:[],c=Array.isArray(r.status)?r.status:r.status?[r.status]:[],S=Array.isArray(r.programId)?r.programId:r.programId?[r.programId]:[],$=s=>{const i=n.includes(s)?n.filter(w=>w!==s):[...n,s];d({...r,organizationalUnitId:i.length>0?i:void 0})},x=s=>{const i=c.includes(s)?c.filter(w=>w!==s):[...c,s];d({...r,status:i.length>0?i:void 0})},G=s=>{const i=S.includes(s)?S.filter(w=>w!==s):[...S,s];d({...r,programId:i.length>0?i:void 0})},H=s=>{const i=n.filter(w=>w!==s);d({...r,organizationalUnitId:i.length>0?i:void 0})},A=s=>{const i=c.filter(w=>w!==s);d({...r,status:i.length>0?i:void 0})},B=s=>{const i=S.filter(w=>w!==s);d({...r,programId:i.length>0?i:void 0})},V=()=>{d({...r,sprint:void 0})},D=()=>{d({...r,owner:void 0})},L=()=>{v.trim()&&f&&(f(v.trim(),r,O),N(""),u(!1),k(!1))},W=()=>{j&&!j.isPreset&&T&&T(j.id,r)},U=n.length>0||c.length>0||S.length>0||!!r.sprint||!!r.owner,M=j&&!j.isPreset&&U,E=y.find(s=>s.id===r.sprint),F=l.find(s=>s.id===r.owner);return e.jsx("div",{className:"border-t border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[j&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"text-teal-600 dark:text-teal-400",size:16}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-teal-100 dark:bg-teal-950 border border-teal-200 dark:border-teal-800",children:[j.isPreset&&e.jsx(oe,{className:"text-teal-600 dark:text-teal-400",size:14}),e.jsx("span",{className:"text-sm font-medium text-teal-700 dark:text-teal-300",children:j.name}),j.isPreset&&e.jsx("span",{className:"text-xs text-teal-600 dark:text-teal-400",children:"(Preset)"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(te,{size:16}),e.jsx("span",{className:"font-medium",children:"Filters:"})]}),e.jsx(X,{label:"Organizational Unit",options:p.map(s=>s.id),selectedValues:n,onToggle:$,getLabel:s=>p.find(i=>i.id===s)?.name||s,groupBy:s=>p.find(i=>i.id===s)?.level||"Other",getGroupLabel:s=>s}),e.jsx(X,{label:"Status",options:be,selectedValues:c,onToggle:x}),e.jsx(X,{label:"Programs",options:h.map(s=>s.id),selectedValues:S,onToggle:G,getLabel:s=>h.find(i=>i.id===s)?.name||s}),e.jsx(re,{label:"Sprint",options:y.map(s=>s.id),selectedValue:r.sprint,onChange:s=>d({...r,sprint:s||void 0}),getLabel:s=>y.find(i=>i.id===s)?.name||s,placeholder:"Sprint"}),e.jsx(re,{label:"Owner",options:l.map(s=>s.id),selectedValue:r.owner,onChange:s=>d({...r,owner:s||void 0}),getLabel:s=>l.find(i=>i.id===s)?.name||s,placeholder:"Owner"}),U&&e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[M&&e.jsxs("button",{type:"button",onClick:W,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-600 dark:bg-blue-700 text-white hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors font-medium text-sm",children:[e.jsx(se,{size:14}),"Update"]}),!C&&e.jsxs("button",{type:"button",onClick:()=>k(!0),className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-teal-600 dark:border-teal-700 text-teal-600 dark:text-teal-400 hover:bg-teal-50 dark:hover:bg-teal-950 transition-colors font-medium text-sm",children:[e.jsx(se,{size:14}),"Save"]}),e.jsxs("button",{type:"button",onClick:()=>{I?.(),k(!1)},className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors font-medium text-sm",children:[e.jsx(P,{size:14}),"Clear"]})]})]}),U&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Active filters:"}),n.map(s=>{const i=p.find(w=>w.id===s);return i?e.jsxs("button",{type:"button",onClick:()=>H(s),className:`flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium border transition-colors hover:opacity-80 ${ke[i.level]}`,children:[i.name,e.jsx(P,{size:12})]},s):null}),c.map(s=>e.jsxs("button",{type:"button",onClick:()=>A(s),className:`flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium border transition-colors hover:opacity-80 ${fe[s]}`,children:[s,e.jsx(P,{size:12})]},s)),S.map(s=>{const i=h.find(w=>w.id===s);return e.jsxs("button",{type:"button",onClick:()=>B(s),className:"flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium border bg-indigo-100 dark:bg-indigo-950 text-indigo-700 dark:text-indigo-300 border-indigo-300 dark:border-indigo-700 transition-colors hover:opacity-80",children:[i?.name||s,e.jsx(P,{size:12})]},s)}),E&&e.jsxs("button",{type:"button",onClick:V,className:"flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium border bg-cyan-100 dark:bg-cyan-950 text-cyan-700 dark:text-cyan-300 border-cyan-300 dark:border-cyan-700 transition-colors hover:opacity-80",children:[E.name,e.jsx(P,{size:12})]}),F&&e.jsxs("button",{type:"button",onClick:D,className:"flex items-center gap-1.5 px-2 py-1 rounded-md text-xs font-medium border bg-violet-100 dark:bg-violet-950 text-violet-700 dark:text-violet-300 border-violet-300 dark:border-violet-700 transition-colors hover:opacity-80",children:[F.name,e.jsx(P,{size:12})]})]}),C&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-950/50 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",value:v,onChange:s=>N(s.target.value),placeholder:"Enter filter name...",className:"w-full px-3 py-2 rounded-lg border border-blue-300 dark:border-blue-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-600",onKeyDown:s=>{s.key==="Enter"&&L(),s.key==="Escape"&&k(!1)},autoFocus:!0})}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-blue-900 dark:text-blue-100",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:s=>u(s.target.checked),className:"w-4 h-4 text-teal-600 dark:text-teal-500 rounded border-blue-300 dark:border-blue-700 focus:ring-teal-500 dark:focus:ring-teal-600"}),"Share"]}),e.jsx("button",{type:"button",onClick:L,disabled:!v.trim(),className:"px-4 py-2 rounded-lg bg-teal-600 dark:bg-teal-700 text-white hover:bg-teal-700 dark:hover:bg-teal-600 transition-colors font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Filter"}),e.jsx("button",{type:"button",onClick:()=>{k(!1),N(""),u(!1)},className:"px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors font-medium text-sm",children:"Cancel"})]})]})})})}function J({tasks:r,keyResultId:j,users:p,currentUser:y,onAddTask:h,onToggleTaskStatus:l,onEditTask:d,onDeleteTask:f}){const[T,I]=g.useState(!1),[C,k]=g.useState(!1),[v,N]=g.useState(""),[O,u]=g.useState(y?.id||p[0]?.id||""),n=r.filter(x=>x.status==="open"),c=r.filter(x=>x.status==="completed"),S=()=>{v.trim()&&O&&(h?.(v.trim(),O),N(""),u(y?.id||p[0]?.id||""),k(!1))},$=x=>{x.key==="Enter"&&!x.shiftKey?(x.preventDefault(),S()):x.key==="Escape"&&(k(!1),N(""))};return e.jsxs("div",{className:"mt-4 border-t border-slate-200 dark:border-slate-800 pt-4",children:[e.jsx("button",{onClick:()=>I(!T),className:"flex items-center justify-between w-full text-left group",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:`w-4 h-4 text-slate-400 dark:text-slate-600 transition-transform ${T?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tasks"}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:["(",n.length," open, ",c.length," completed)"]})]})}),T&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"max-h-[400px] overflow-y-auto",children:[n.length>0&&e.jsx("div",{className:"space-y-0.5",children:n.map(x=>e.jsx(ae,{task:x,onToggleStatus:()=>l?.(x.id),onEdit:()=>{console.log("Edit task:",x.id)},onDelete:()=>f?.(x.id)},x.id))}),n.length>0&&c.length>0&&e.jsx("div",{className:"my-3 border-t border-slate-200 dark:border-slate-800"}),c.length>0&&e.jsx("div",{className:"space-y-0.5 opacity-75",children:c.map(x=>e.jsx(ae,{task:x,onToggleStatus:()=>l?.(x.id),onEdit:()=>{console.log("Edit task:",x.id)},onDelete:()=>f?.(x.id)},x.id))}),r.length===0&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500 py-4 text-center",children:"No tasks yet"})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-slate-200 dark:border-slate-800",children:C?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:v,onChange:x=>N(x.target.value),onKeyDown:$,placeholder:"Task description...",autoFocus:!0,className:"w-full px-3 py-2 text-sm border border-slate-300 dark:border-slate-700 rounded-md bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-50 placeholder-slate-400 dark:placeholder-slate-600 focus:outline-none focus:ring-2 focus:ring-teal-500 dark:focus:ring-teal-400 focus:border-transparent transition-all"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:O,onChange:x=>u(x.target.value),className:"flex-1 px-3 py-2 text-sm border border-slate-300 dark:border-slate-700 rounded-md bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-50 focus:outline-none focus:ring-2 focus:ring-teal-500 dark:focus:ring-teal-400 focus:border-transparent transition-all",children:p.map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))}),e.jsx("button",{onClick:S,disabled:!v.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 dark:bg-teal-500 dark:hover:bg-teal-600 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 dark:focus:ring-teal-400",children:"Add"}),e.jsx("button",{onClick:()=>{k(!1),N("")},className:"px-4 py-2 text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:focus:ring-slate-400 rounded-md",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 text-sm text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 transition-colors focus:outline-none focus:ring-2 focus:ring-teal-500 dark:focus:ring-teal-400 rounded px-2 py-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Task"]})})]})]})}const Y={Group:"bg-purple-100 dark:bg-purple-950 text-purple-700 dark:text-purple-300 border-purple-200 dark:border-purple-800",Entity:"bg-teal-100 dark:bg-teal-950 text-teal-700 dark:text-teal-300 border-teal-200 dark:border-teal-800",Domain:"bg-blue-100 dark:bg-blue-950 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800",Department:"bg-amber-100 dark:bg-amber-950 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-800",Team:"bg-rose-100 dark:bg-rose-950 text-rose-700 dark:text-rose-300 border-rose-200 dark:border-rose-800"},Q={Draft:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400",Accepted:"bg-blue-100 dark:bg-blue-950 text-blue-700 dark:text-blue-300",Active:"bg-teal-100 dark:bg-teal-950 text-teal-700 dark:text-teal-300",Done:"bg-emerald-100 dark:bg-emerald-950 text-emerald-700 dark:text-emerald-300",Archived:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-400",Cancelled:"bg-red-100 dark:bg-red-950 text-red-700 dark:text-red-300"};function ve({objectives:r,organizationalUnits:j,sprints:p,programs:y,savedFilters:h,currentUser:l,viewMode:d="full",activeFilterId:f,expandedObjectiveIds:T=[],onCreateObjective:I,onCreateKeyResult:C,onEditObjective:k,onEditKeyResult:v,onToggleViewMode:N,onToggleObjective:O,onFilterChange:u,onSaveAsNewFilter:n,onUpdateFilter:c,onClearFilters:S}){const[$,x]=g.useState(new Set(T)),[G,H]=g.useState({}),[A,B]=g.useState(null);g.useEffect(()=>{if(A){const t=setTimeout(()=>{B(null)},2e3);return()=>clearTimeout(t)}},[A]);const V=h?.find(t=>t.id===f)||null,D=[l,...r.map(t=>t.owner).filter((t,m,a)=>a.findIndex(b=>b.id===t.id)===m)],L=t=>j.find(m=>m.id===t.organizationalUnitId),W=t=>{H(t),u?.(t)},U=()=>{H({}),S?.()},M=t=>{const m=new Set($);m.has(t)?m.delete(t):m.add(t),x(m),O?.(t)},E=t=>{const m=document.getElementById(`objective-${t}`);if(m){m.scrollIntoView({behavior:"smooth",block:"center"}),B(t);const a=new Set($);a.add(t),x(a),O?.(t)}},F=t=>t.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2),s=t=>t.programIds.map(m=>y.find(a=>a.id===m)?.name).filter(Boolean).join(", "),i=t=>{if(!t.parentObjectiveId)return 0;const m=r.find(a=>a.id===t.parentObjectiveId);return m?i(m)+1:0},w=t=>{const m=[];let a=t;for(;a.parentObjectiveId;){const b=r.find(o=>o.id===a.parentObjectiveId);if(b)m.unshift(b),a=b;else break}return m};return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"OKR Hierarchy"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Manage objectives and key results across all organizational levels"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>N?.("full"),className:`p-2 rounded transition-colors ${d==="full"?"bg-white dark:bg-slate-700 text-teal-600 dark:text-teal-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,title:"Full view",children:e.jsx(he,{size:18})}),e.jsx("button",{onClick:()=>N?.("compact"),className:`p-2 rounded transition-colors ${d==="compact"?"bg-white dark:bg-slate-700 text-teal-600 dark:text-teal-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,title:"Compact view",children:e.jsx(me,{size:18})}),e.jsx("button",{onClick:()=>N?.("hierarchy"),className:`p-2 rounded transition-colors ${d==="hierarchy"?"bg-white dark:bg-slate-700 text-teal-600 dark:text-teal-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,title:"Hierarchy view",children:e.jsx(pe,{size:18})})]}),e.jsx("button",{onClick:()=>C?.(),className:"px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors font-medium text-sm",children:"New Key Result"}),e.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-teal-600 dark:bg-teal-700 text-white hover:bg-teal-700 dark:hover:bg-teal-600 transition-colors font-medium text-sm shadow-sm",children:[e.jsx(xe,{size:18}),"New Objective"]})]})]}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:A?e.jsxs(e.Fragment,{children:[e.jsx(q,{size:14,className:"text-teal-600 dark:text-teal-400"}),e.jsx("span",{className:"text-slate-500 dark:text-slate-500 text-xs font-medium uppercase tracking-wide",children:"OKR Cascade:"}),(()=>{const t=r.find(a=>a.id===A);if(!t)return null;const m=w(t);return e.jsxs(e.Fragment,{children:[m.length===0&&e.jsxs(e.Fragment,{children:[e.jsx(R,{size:14,className:"text-slate-400 dark:text-slate-600"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs",children:"Top-level objective"})]}),m.map(a=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:14,className:"text-slate-400 dark:text-slate-600"}),e.jsx("button",{onClick:()=>E(a.id),className:"text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors truncate max-w-[200px]",title:a.title,children:a.title})]},a.id)),e.jsx(R,{size:14,className:"text-slate-400 dark:text-slate-600"}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100 font-medium truncate max-w-[300px]",title:t.title,children:t.title}),t.childObjectiveIds.length>0&&e.jsxs("span",{className:"text-xs text-teal-600 dark:text-teal-400 ml-2",children:["(",t.childObjectiveIds.length," child",t.childObjectiveIds.length>1?"ren":"",")"]})]})})()]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors",children:"All Organizations"}),e.jsx(R,{size:14,className:"text-slate-400 dark:text-slate-600"}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100 font-medium",children:l.entity}),e.jsx(R,{size:14,className:"text-slate-400 dark:text-slate-600"}),e.jsx("span",{className:"text-slate-900 dark:text-slate-100 font-medium",children:l.domain})]})})]})}),e.jsx(je,{criteria:G,activeFilter:V,organizationalUnits:j,sprints:p,programs:y,users:D,onCriteriaChange:W,onSaveAsNewFilter:n,onUpdateFilter:c,onClearFilters:U}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsx("div",{className:"space-y-3",children:r.map(t=>{const m=$.has(t.id);if(d==="hierarchy"){const b=i(t)*48;return e.jsxs("div",{id:`objective-${t.id}`,className:"relative",style:{marginLeft:`${b}px`},children:[t.parentObjectiveId&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute left-0 top-0 w-0.5 bg-slate-300 dark:bg-slate-700",style:{height:"24px",left:"-24px"}}),e.jsx("div",{className:"absolute top-6 left-0 h-0.5 bg-slate-300 dark:bg-slate-700",style:{width:"24px",left:"-24px"}})]}),e.jsxs("div",{className:`bg-white dark:bg-slate-900 rounded-lg border transition-all cursor-pointer ${A===t.id?"border-teal-500 dark:border-teal-500 shadow-lg shadow-teal-500/50 dark:shadow-teal-500/30 ring-2 ring-teal-500 dark:ring-teal-500":"border-slate-200 dark:border-slate-800 hover:border-teal-300 dark:hover:border-teal-700"}`,onClick:()=>M(t.id),children:[e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("button",{className:"text-slate-400 dark:text-slate-600 hover:text-slate-600 dark:hover:text-slate-400",children:m?e.jsx(_,{size:20}):e.jsx(R,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(q,{size:16,className:"text-teal-600 dark:text-teal-400 flex-shrink-0"}),e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 flex-1",children:t.title}),e.jsx("button",{onClick:o=>{o.stopPropagation(),k?.(t.id)},className:"text-xs text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors font-medium",children:"Edit"})]}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 line-clamp-1",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"w-7 h-7 rounded-full bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-300 flex items-center justify-center text-xs font-medium",children:F(t.owner.name)})}),e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${Q[t.status]}`,children:t.status}),e.jsxs("div",{className:"flex items-center gap-2 min-w-[100px]",children:[e.jsx("div",{className:"flex-1 h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-teal-500 dark:bg-teal-600 transition-all",style:{width:`${t.progress}%`}})}),e.jsxs("span",{className:"text-xs font-mono font-medium text-slate-700 dark:text-slate-300 min-w-[35px] text-right",children:[t.progress,"%"]})]}),(()=>{const o=L(t);return o?e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium border ${Y[o.level]}`,children:o.name}):null})(),t.childObjectiveIds.length>0&&e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:[t.childObjectiveIds.length," child",t.childObjectiveIds.length>1?"ren":""]})]})]}),m&&t.keyResults.length>0&&e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wide",children:"Key Results"}),e.jsx("button",{onClick:o=>{o.stopPropagation(),C?.(t.id)},className:"text-xs text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 font-medium",children:"+ Add Key Result"})]}),e.jsx("div",{className:"space-y-4",children:t.keyResults.map(o=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 group",onClick:z=>z.stopPropagation(),children:[e.jsx(le,{size:14,className:"text-blue-500 dark:text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"flex-1 text-sm text-slate-700 dark:text-slate-300",children:o.title}),e.jsx("button",{onClick:z=>{z.stopPropagation(),v?.(o.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity text-xs text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 font-medium",children:"Edit"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600",style:{width:`${o.progress}%`}})}),e.jsxs("span",{className:"text-xs font-mono text-slate-600 dark:text-slate-400 min-w-[30px] text-right",children:[o.progress,"%"]})]}),o.linkedChildObjectiveId&&e.jsx("button",{onClick:z=>{z.stopPropagation(),E(o.linkedChildObjectiveId)},className:"flex items-center gap-1 text-xs text-teal-600 dark:text-teal-400 hover:underline",title:`Cascades to: ${r.find(z=>z.id===o.linkedChildObjectiveId)?.title}`,children:e.jsx(ee,{size:10})})]}),e.jsx(J,{tasks:o.tasks||[],keyResultId:o.id,users:D,currentUser:l,onAddTask:(z,de)=>{console.log("Add task:",o.id,z,de)},onToggleTaskStatus:z=>{console.log("Toggle task:",z)},onDeleteTask:z=>{console.log("Delete task:",z)}})]},o.id))})]})]})]},t.id)}return d==="compact"?e.jsxs("div",{id:`objective-${t.id}`,className:`bg-white dark:bg-slate-900 rounded-lg border transition-all cursor-pointer ${A===t.id?"border-teal-500 dark:border-teal-500 shadow-lg shadow-teal-500/50 dark:shadow-teal-500/30 ring-2 ring-teal-500 dark:ring-teal-500":"border-slate-200 dark:border-slate-800 hover:border-teal-300 dark:hover:border-teal-700"}`,onClick:()=>M(t.id),children:[e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("button",{className:"text-slate-400 dark:text-slate-600 hover:text-slate-600 dark:hover:text-slate-400",children:m?e.jsx(_,{size:20}):e.jsx(R,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 truncate flex-1",children:t.title}),e.jsx("button",{onClick:a=>{a.stopPropagation(),k?.(t.id)},className:"text-xs text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors font-medium flex-shrink-0",children:"Edit"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-300 flex items-center justify-center text-xs font-medium",children:F(t.owner.name)}),e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.owner.name})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Q[t.status]}`,children:t.status}),e.jsxs("div",{className:"flex items-center gap-2 min-w-[120px]",children:[e.jsx("div",{className:"flex-1 h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-teal-500 dark:bg-teal-600 transition-all",style:{width:`${t.progress}%`}})}),e.jsxs("span",{className:"text-sm font-mono font-medium text-slate-700 dark:text-slate-300 min-w-[40px] text-right",children:[t.progress,"%"]})]}),(()=>{const a=L(t);return a?e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${Y[a.level]}`,children:a.name}):null})()]})]}),m&&t.keyResults.length>0&&e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wide",children:"Key Results"}),e.jsx("button",{onClick:a=>{a.stopPropagation(),C?.(t.id)},className:"text-xs text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 font-medium",children:"+ Add Key Result"})]}),e.jsx("div",{className:"space-y-4",children:t.keyResults.map(a=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 group",onClick:b=>b.stopPropagation(),children:[e.jsx(le,{size:16,className:"text-blue-500 dark:text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"flex-1 text-sm text-slate-700 dark:text-slate-300",children:a.title}),e.jsx("button",{onClick:b=>{b.stopPropagation(),v?.(a.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity text-xs text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 font-medium",children:"Edit"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600",style:{width:`${a.progress}%`}})}),e.jsxs("span",{className:"text-xs font-mono text-slate-600 dark:text-slate-400 min-w-[35px] text-right",children:[a.progress,"%"]})]})]}),e.jsx(J,{tasks:a.tasks||[],keyResultId:a.id,users:D,currentUser:l,onAddTask:(b,o)=>{console.log("Add task:",a.id,b,o)},onToggleTaskStatus:b=>{console.log("Toggle task:",b)},onDeleteTask:b=>{console.log("Delete task:",b)}})]},a.id))})]})]},t.id):e.jsxs("div",{id:`objective-${t.id}`,className:`bg-white dark:bg-slate-900 rounded-lg border transition-all overflow-hidden ${A===t.id?"border-teal-500 dark:border-teal-500 shadow-lg shadow-teal-500/50 dark:shadow-teal-500/30 ring-2 ring-teal-500 dark:ring-teal-500":"border-slate-200 dark:border-slate-800 hover:border-teal-300 dark:hover:border-teal-700"}`,children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{onClick:()=>M(t.id),className:"mt-1 text-slate-400 dark:text-slate-600 hover:text-slate-600 dark:hover:text-slate-400 transition-colors",children:m?e.jsx(_,{size:20}):e.jsx(R,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(q,{size:18,className:"text-teal-600 dark:text-teal-400 flex-shrink-0"}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:t.title})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:t.description})]}),e.jsx("button",{onClick:a=>{a.stopPropagation(),k?.(t.id)},className:"text-sm text-slate-600 dark:text-slate-400 hover:text-teal-600 dark:hover:text-teal-400 transition-colors font-medium",children:"Edit"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 font-medium mb-1.5",children:"Owner"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-300 flex items-center justify-center text-xs font-medium",children:F(t.owner.name)}),e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:t.owner.name})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 font-medium mb-1.5",children:"Organizational Unit"}),(()=>{const a=L(t);return a?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border w-fit ${Y[a.level]}`,children:a.name}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:a.level})]}):null})()]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 font-medium mb-1.5",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${Q[t.status]}`,children:t.status})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 font-medium mb-1.5",children:"Sprint"}),e.jsx("span",{className:"text-sm font-mono font-medium text-slate-900 dark:text-slate-100",children:t.sprint})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 font-medium mb-1.5",children:"Progress"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-teal-500 dark:bg-teal-600 transition-all",style:{width:`${t.progress}%`}})}),e.jsxs("span",{className:"text-sm font-mono font-bold text-teal-700 dark:text-teal-300 min-w-[45px]",children:[t.progress,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 font-medium mb-1.5",children:"Key Results"}),e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:[t.keyResultCount," KRs"]})]}),t.programIds.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 font-medium mb-1.5",children:"Programs"}),e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:s(t)})]})]}),(t.parentObjectiveId||t.childObjectiveIds.length>0)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-800",children:e.jsxs("div",{className:"space-y-3",children:[t.parentObjectiveId&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500 font-medium",children:"↑ Cascades from:"}),e.jsx("button",{onClick:a=>{a.stopPropagation(),E(t.parentObjectiveId)},className:"text-xs text-teal-600 dark:text-teal-400 hover:underline font-medium",children:r.find(a=>a.id===t.parentObjectiveId)?.title})]}),t.childObjectiveIds.length>0&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500 font-medium whitespace-nowrap",children:"↓ Cascades to:"}),e.jsx("div",{className:"flex flex-wrap gap-x-3 gap-y-1",children:t.childObjectiveIds.map(a=>{const b=r.find(o=>o.id===a);return b?e.jsx("button",{onClick:o=>{o.stopPropagation(),E(a)},className:"text-xs text-teal-600 dark:text-teal-400 hover:underline",children:b.title},a):null})})]})]})})]})]})}),m&&t.keyResults.length>0&&e.jsx("div",{className:"border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-950",children:e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wide",children:"Key Results"}),e.jsx("button",{onClick:a=>{a.stopPropagation(),C?.(t.id)},className:"text-sm text-teal-600 dark:text-teal-400 hover:text-teal-700 dark:hover:text-teal-300 font-medium",children:"+ Add Key Result"})]}),t.keyResults.map((a,b)=>e.jsx("div",{className:"p-4 bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800 hover:border-blue-300 dark:hover:border-blue-700 transition-all group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-950 text-blue-700 dark:text-blue-300 flex items-center justify-center text-xs font-bold",children:b+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 leading-relaxed",children:a.title}),e.jsx("button",{onClick:o=>{o.stopPropagation(),v?.(a.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity text-xs text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 font-medium",children:"Edit"})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"flex-1 h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 dark:bg-blue-600 transition-all",style:{width:`${a.progress}%`}})}),e.jsxs("span",{className:"text-xs font-mono font-bold text-blue-700 dark:text-blue-300 min-w-[40px]",children:[a.progress,"%"]})]}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${Q[a.status]}`,children:a.status}),a.linkedChildObjectiveId&&e.jsxs("button",{onClick:o=>{o.stopPropagation(),E(a.linkedChildObjectiveId)},className:"flex items-center gap-1 text-xs text-teal-600 dark:text-teal-400 hover:underline",title:`Cascades to: ${r.find(o=>o.id===a.linkedChildObjectiveId)?.title}`,children:[e.jsx(ee,{size:12}),"Cascades to objective"]})]}),e.jsx(J,{tasks:a.tasks||[],keyResultId:a.id,users:D,currentUser:l,onAddTask:(o,z)=>{console.log("Add task:",a.id,o,z)},onToggleTaskStatus:o=>{console.log("Toggle task:",o)},onDeleteTask:o=>{console.log("Delete task:",o)}})]})]})},a.id))]})})]},t.id)})})})]})}const K=ne;function $e(){const[r,j]=g.useState("full"),[p,y]=g.useState([]),h=l=>{y(d=>d.includes(l)?d.filter(f=>f!==l):[...d,l])};return e.jsx(ve,{objectives:K.objectives,organizationalUnits:K.organizationalUnits,sprints:K.sprints,programs:K.programs,savedFilters:K.savedFilters,currentUser:K.currentUser,viewMode:r,expandedObjectiveIds:p,onCreateObjective:()=>console.log("Create objective"),onCreateKeyResult:l=>console.log("Create key result",l?`for ${l}`:"standalone"),onEditObjective:l=>console.log("Edit objective:",l),onEditKeyResult:l=>console.log("Edit key result:",l),onDeleteObjective:l=>console.log("Delete objective:",l),onDeleteKeyResult:l=>console.log("Delete key result:",l),onChangeObjectiveStatus:(l,d)=>console.log("Change objective status:",l,"to",d),onChangeKeyResultStatus:(l,d)=>console.log("Change key result status:",l,"to",d),onLinkKeyResultToObjective:(l,d)=>console.log("Link key result",l,"to objective",d),onAssignToSprint:(l,d)=>console.log("Assign to sprint:",l,d),onAssignToProgram:(l,d)=>console.log("Assign to programs:",l,d),onToggleViewMode:l=>j(l),onToggleObjective:h,onApplyFilter:l=>console.log("Apply filter:",l),onNavigateHierarchy:(l,d)=>console.log("Navigate to:",l,d),onFilterChange:l=>console.log("Filter change:",l)})}export{$e as default};
